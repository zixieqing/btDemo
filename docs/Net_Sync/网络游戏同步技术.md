### 同步技术

#### 为什么会研究？
不同客户端, 由于设备性能，网速问题。导致接收服务器数据出现延迟，客户端就会显示异常。为了解决该问题


#### 目前比较主流的同步方案
1.帧插值(Interpolation): 这种技术通过在客户端对服务器发送的数据进行插值处理,来平滑游戏画面,减少由于网络延迟导致的画面卡顿。它适用于对实时性和视觉效果要求较高的游戏。

2.预测性同步(Prediction Sync): 客户端根据之前的输入和状态,预测当前帧的游戏状态,并持续更新游戏。当收到服务器的实际状态时,再进行校正。这种方式可以减少因网络延迟导致的等待时间。

3.Roll-back/Roll-forward同步: 这种技术会在客户端保留过去几帧的游戏状态,当收到服务器的更新时,会回滚到之前的状态,然后重新执行这段时间的操作,达到状态同步的目的。适用于需要高度同步的游戏。

4.客户端权威(Client-side Authority): 在这种模式下,客户端负责处理大部分游戏逻辑,只有在特定情况下才向服务器请求确认。这样可以减轻服务器压力,但需要更多的客户端防作弊机制。适用于一些对同步要求不太高的游戏。

5.混合同步(Hybrid Sync): 将上述几种同步技术结合使用,根据不同游戏需求采取不同的同步方式。比如对某些关键游戏对象采用roll-back同步,对其他对象采用预测同步。这种混合方式可以更好地平衡同步性、性能和延迟。


#### 分类
|-- 混合模式
|-- 结果同步
|-- 状态同步
|   |-- 分层同步:
|-- 回滚同步
|-- 帧同步
|   |-- 帧锁定
|   |-- 乐观帧锁定
|   |-- 帧插值
|   |-- 预测性同步




#### 网络游戏同步技术的发展历史

早期网游时代 (1990s-2000s):

主要采用【状态同步技术】,客户端定期上传状态,服务器计算最终状态并广播。
由于网络延迟和带宽限制,这种方式同步性较差,容易出现卡顿等问题。


帧同步时代 (2000s-2010s):

为了解决状态同步的问题,出现了【帧同步技术】。
客户端和服务器保持一致的帧序,客户端只需上传输入,服务器计算并广播每一帧的状态。
这种方式同步性好,但要求网络延迟很低,如果有玩家网速慢,会拖慢所有人。

插值时代 (2010s-2020s):

为了解决帧同步的问题,出现了帧插值技术。
客户端根据服务器发送的状态进行插值计算,减少了网络延迟带来的视觉卡顿。
这种方式能较好地平衡同步性和流畅性,但仍会有一些视觉失真。


预测时代 (2020s-现在):

为了进一步降低网络延迟的影响,出现了预测同步技术。
客户端根据历史输入预测当前帧状态,服务器只需校正预测错误。
这种方式能有效减少等待时间,但需要更复杂的预测算法。
除了这些主流技术外,也有一些已经不太使用的同步方式,比如:

Turn-based同步: 每回合由服务器计算状态,客户端只能等待。适用于回合制游戏。
客户端权威: 客户端自主处理大部分逻辑,只在必要时向服务器请求确认。适用于不需高同步的游戏。
混合同步: 将多种同步技术结合使用,根据不同需求采取不同方式。


#### 参考资料
https://www.skywind.me/blog/archives/131

帧同步开源框架Go语言：
https://github.com/zixieqing/nakama.git
